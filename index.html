<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>풍물놀이패 40주년 기념 행사</title>
  <meta name="description" content="풍물놀이패 동아리 40주년 기념 행사 안내 및 참가 신청 페이지" />
  <style>
    :root{
      --bg:#0f1020;
      --text:#e9ecf1;
      --muted:#b8bed1;
      --brand:#ff3b7b;
      --brand-2:#ffc43b;
      --accent:#3bd1ff;
      --card:#14152a;
      --radius:16px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,"Noto Sans KR",sans-serif;
      color:var(--text);
      background:
        url('pungmul-hero.jpg') center/cover no-repeat fixed,
        linear-gradient(180deg,#0e0f1e,#11142b);
    }
    a{color:var(--accent);text-decoration:none}
    img{max-width:100%;display:block}
    .container{width:min(1100px,92%);margin:0 auto}

    /* 헤더 */
    header{position:sticky;top:0;z-index:50;background:rgba(15,16,32,.6);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,.08)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:10px 0}
    .nav .brand{display:flex;gap:10px;align-items:center}
    .brand img{width:40px;height:40px;object-fit:cover;border-radius:50%}
    .brand span{font-weight:800;letter-spacing:.3px}
    .nav ul{display:flex;gap:16px;list-style:none;margin:0;padding:0}
    .nav a{padding:8px 12px;border-radius:10px;color:var(--text)}
    .nav a:hover{background:rgba(255,255,255,.08)}

    /* 버튼 */
    .btn{padding:12px 18px;border:0;border-radius:12px;cursor:pointer;display:inline-flex;gap:8px;align-items:center;font-weight:700}
    .btn.primary{background:linear-gradient(90deg,var(--brand),var(--brand-2));color:#111}
    .btn.secondary{background:#22274a;color:#fff;border:1px solid rgba(255,255,255,.12)}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,.2);color:#fff}
    .btn:disabled{opacity:.6;cursor:not-allowed}

    /* 섹션 공통 */
    section{padding:72px 20px;background:rgba(0,0,0,.68);margin:40px auto;width:min(1100px,92%);border-radius:16px;box-shadow:var(--shadow)}
    h1,h2,h3{margin:0 0 12px}
    .note{font-size:13px;color:var(--muted)}

    /* Hero */
    .hero{min-height:100svh;display:flex;align-items:center}
    .hero .logo{width:min(160px,30vw);border-radius:50%;box-shadow:var(--shadow)}
    .hero .badge{color:var(--brand-2);font-weight:800}
    .hero h1{font-size:clamp(28px,4.5vw,54px)}
    .hero .lead{color:var(--muted);margin:0 0 10px}
    .cta{display:flex;gap:10px;flex-wrap:wrap}
    .countdown{display:flex;gap:10px;margin-top:20px;flex-wrap:wrap}
    .cd-box{min-width:68px;text-align:center;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:10px}
    .cd-box b{font-size:22px;display:block}
    .cd-box span{font-size:12px;color:var(--muted)}

    /* Info */
    .info-grid{display:grid;grid-template-columns:1fr 1fr;gap:22px}
    .info-item{padding:18px;background:rgba(20,21,42,.7);border-radius:14px;border:1px solid rgba(255,255,255,.08)}
    .program table{width:100%;border-collapse:collapse}
    .program th,.program td{border:1px solid rgba(255,255,255,.12);padding:10px;text-align:left}
    .program th{background:rgba(255,255,255,.06)}
    .map-card iframe{width:100%;height:340px;border:0;border-radius:12px}

    /* Fees */
    .fee{padding:18px;display:grid;gap:14px;background:rgba(20,21,42,.7);border-radius:14px;border:1px solid rgba(255,255,255,.08)}
    .fee .options{display:flex;flex-wrap:wrap;gap:10px}
    .chip{padding:10px 14px;border-radius:999px;background:#21264a;border:1px solid rgba(255,255,255,.15);cursor:pointer;display:flex;align-items:center;gap:8px}
    .fee .summary{display:flex;gap:12px;flex-wrap:wrap;align-items:center}

    /* History & gallery */
    .timeline{padding:18px;background:rgba(20,21,42,.7);border-radius:14px;border:1px solid rgba(255,255,255,.08)}
    .timeline ul{list-style:none;margin:0;padding:0}
    .timeline li{padding:12px 0;border-left:3px solid var(--brand);padding-left:12px;margin-left:6px}
    .marquee{display:flex;gap:16px;overflow:hidden}
    .marquee .track{display:flex;gap:16px;animation:scrollX 30s linear infinite}
    .marquee img{width:320px;height:210px;object-fit:cover;border-radius:14px;border:1px solid rgba(255,255,255,.12)}
    @keyframes scrollX{from{transform:translateX(0)}to{transform:translateX(-50%)}}

    /* Contact */
    .contact-grid{display:grid;grid-template-columns:1fr 1fr;gap:22px}
    form .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    input,select,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:#1b1f42;color:var(--text)}
    textarea{min-height:120px}

    footer{padding:26px 0;color:var(--muted);text-align:center;border-top:1px solid rgba(255,255,255,.08);background:rgba(14,17,48,.85)}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:20px;z-index:100}
    .modal[open]{display:flex}
    .dialog{background:#222;padding:20px;border-radius:12px;max-width:720px;width:96%}
    .dialog header{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:8px}
    .dialog h3{margin:0;color:var(--brand-2)}
    .account{font-size:1.3em;font-weight:900;color:var(--accent);margin:8px 0}
    .bank{font-weight:800;color:var(--brand)}
    .qr-wrap{display:grid;grid-template-columns:1fr auto;gap:14px;align-items:center;margin-top:12px}
    .qr-box{background:#111;padding:12px;border-radius:12px;display:inline-block;border:1px solid rgba(255,255,255,.12)}
    .hidden{display:none!important}

    /* 반응형 */
    @media (max-width:900px){
      .info-grid,.contact-grid{grid-template-columns:1fr}
      form .row{grid-template-columns:1fr}
      .qr-wrap{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <!-- 헤더 -->
  <header>
    <div class="container nav">
      <div class="brand"><img src="logo.png" alt="동아리 로고"/><span>풍물놀이패 40주년</span></div>
      <ul>
        <li><a href="#home">홈</a></li>
        <li><a href="#about">행사 안내</a></li>
        <li><a href="#history">연혁 · 갤러리</a></li>
        <li><a href="#contact">문의</a></li>
      </ul>
    </div>
  </header>

  <!-- 1) Hero -->
  <section id="home" class="hero">
    <div class="container">
      <div style="display:grid;gap:14px;justify-items:start">
        <img class="logo" src="logo.png" alt="동아리 로고"/>
        <div class="badge">40th Anniversary</div>
        <h1>함께 울리고, 다시 모이다</h1>
        <p class="lead">2026년 5월 30일(토) · 대학아트홀 — 풍물놀이패 40주년 기념 한마당</p>
        <div class="cta">
          <button class="btn primary" id="openReg">참가신청하기</button>
          <button class="btn secondary" id="openSponsor">후원하기</button>
          <a class="btn ghost" href="#about">행사안내 보기</a>
        </div>

        <div class="countdown" aria-live="polite">
          <div class="cd-box"><b id="dday">0</b><span>D-DAY</span></div>
          <div class="cd-box"><b id="days">0</b><span>일</span></div>
          <div class="cd-box"><b id="hours">0</b><span>시간</span></div>
          <div class="cd-box"><b id="mins">0</b><span>분</span></div>
          <div class="cd-box"><b id="secs">0</b><span>초</span></div>
        </div>
      </div>
    </div>
  </section>

  <!-- 2) Info -->
  <section id="about">
    <div class="container">
      <h2>행사 안내</h2>
      <p class="note">일정 · 장소 · 주최 및 찾아오시는 길</p>
      <div class="info-grid">
        <div class="info-item">
          <ul style="list-style:none;padding:0;margin:0">
            <li><b>일시</b> : 2026년 5월 30일(토)</li>
            <li><b>장소</b> : 대학아트홀</li>
            <li><b>주최</b> : 풍물놀이패 회원일동</li>
          </ul>
          <div class="program" style="margin-top:10px">
            <h3>식순(안)</h3>
            <table aria-label="행사 식순">
              <thead><tr><th style="width:120px">시간</th><th>내용</th></tr></thead>
              <tbody>
                <tr><td>14:00</td><td>오프닝·집결</td></tr>
                <tr><td>14:10</td><td>내빈 소개 및 축사</td></tr>
                <tr><td>14:30</td><td>공연 1부 (진쇠·삼채)</td></tr>
                <tr><td>15:10</td><td>휴식</td></tr>
                <tr><td>15:25</td><td>공연 2부 (사물놀이 합주)</td></tr>
                <tr><td>16:10</td><td>동문 인터뷰 영상 상영</td></tr>
                <tr><td>16:30</td><td>단체 기념촬영</td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="info-item map-card">
          <iframe title="네이버 지도 - 대학아트홀" src="https://map.naver.com/p/search/%EB%8C%80%ED%95%99%EC%95%84%ED%8A%B8%ED%99%80" loading="lazy"></iframe>
          <div class="note" style="padding-top:8px">* 네이버 지도에서 "퍼가기" 코드로 교체하면 정확한 약도가 표시됩니다.</div>
        </div>
      </div>

      <div id="fees" class="fee" style="margin-top:18px">
        <h3 style="margin:0">참가비 · 후원 선택</h3>
        <div class="options" role="group" aria-label="요금 선택">
          <label class="chip"><input type="radio" name="fee" value="0" checked>무료(동문)</label>
          <label class="chip"><input type="radio" name="fee" value="10000">일반 1만원</label>
          <label class="chip"><input type="radio" name="fee" value="20000">후원 2만원</label>
          <label class="chip"><input type="radio" name="fee" value="50000">후원 5만원</label>
          <label class="chip"><input type="radio" name="fee" value="custom">직접 입력</label>
          <input id="customFee" type="number" min="0" placeholder="직접 입력 (원)" style="display:none;width:180px" />
        </div>
        <div class="summary">
          <div>선택 금액: <b id="feeSelected">0원</b></div>
          <button class="btn secondary" id="btnPay">결제하기(연동 필요)</button>
          <span class="note">* 실제 결제 연동은 추후 PG/계좌이체/QR 등으로 연결하세요.</span>
        </div>
      </div>
    </div>
  </section>

  <!-- 3) History & Gallery -->
  <section id="history">
    <div class="container">
      <h2>동아리 40주년 연혁</h2>
      <p class="note">주요 발자취</p>
      <div class="timeline">
        <ul>
          <li><b>1986</b> 창립</li>
          <li><b>1995</b> 지역 문화축제 첫 대상 수상</li>
          <li><b>2003</b> 해외 교류 공연 시작</li>
          <li><b>2010</b> 정기공연 20회 달성</li>
          <li><b>2016</b> 창립 30주년 기념 굿판</li>
          <li><b>2020</b> 온라인 비대면 공연 시도</li>
          <li><b>2026</b> 창립 40주년 기념 한마당</li>
        </ul>
      </div>

      <h3 style="margin:24px 0 10px">갤러리</h3>
      <div class="marquee">
        <div class="track">
          <img src="gallery1.jpg" alt="공연 사진 1" />
          <img src="gallery2.jpg" alt="공연 사진 2" />
          <img src="gallery3.jpg" alt="공연 사진 3" />
          <img src="gallery4.jpg" alt="공연 사진 4" />
          <img src="gallery5.jpg" alt="공연 사진 5" />
          <img src="gallery1.jpg" alt="공연 사진 1" />
          <img src="gallery2.jpg" alt="공연 사진 2" />
          <img src="gallery3.jpg" alt="공연 사진 3" />
          <img src="gallery4.jpg" alt="공연 사진 4" />
          <img src="gallery5.jpg" alt="공연 사진 5" />
        </div>
      </div>
      <p class="note" style="margin-top:8px">* 이미지 파일(gallery1~5.jpg)을 교체하세요. 자동 슬라이드(무한 루프)입니다.</p>
    </div>
  </section>

  <!-- 4) Contact -->
  <section id="contact">
    <div class="container">
      <h2>문의하기</h2>
      <p class="note">담당자 연락처 및 메일 전송</p>

      <div class="contact-grid">
        <div style="padding:18px;background:rgba(20,21,42,.7);border-radius:14px;border:1px solid rgba(255,255,255,.08)">
          <h3 style="margin-top:0">담당자</h3>
          <p>
            이메일: <a id="contactEmail" href="mailto:pungmul40@example.com">pungmul40@example.com</a><br/>
            연락처: <a href="tel:01012345678">010-1234-5678</a><br/>
            인스타그램: <a href="https://instagram.com/pungmul_official" target="_blank" rel="noopener">@pungmul_official</a>
          </p>
          <p class="note">* 실제 연락처로 교체하세요.</p>
        </div>

        <div style="padding:18px;background:rgba(20,21,42,.7);border-radius:14px;border:1px solid rgba(255,255,255,.08)">
          <h3 style="margin-top:0">메일 보내기</h3>
          <form id="mailForm">
            <div class="row">
              <div>
                <label>이름</label>
                <input type="text" name="name" required />
              </div>
              <div>
                <label>이메일</label>
                <input type="email" name="email" />
              </div>
            </div>
            <div class="row" style="margin-top:10px">
              <div>
                <label>연락처</label>
                <input type="tel" name="phone" />
              </div>
              <div>
                <label>문의 유형</label>
                <select name="type">
                  <option value="general">일반 문의</option>
                  <option value="volunteer">자원봉사</option>
                  <option value="sponsor">후원 문의</option>
                </select>
              </div>
            </div>
            <div style="margin-top:10px">
              <label>내용</label>
              <textarea name="message" required></textarea>
            </div>
            <div style="margin-top:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
              <button class="btn primary" type="submit">메일 전송</button>
              <span class="note">* 현재는 메일 앱으로 전송됩니다. (EmailJS 등 연동 가능)</span>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">© 2026 풍물놀이패 동아리 — 40주년 기념행사</div>
  </footer>

  <!-- 참가신청 모달 -->
  <div id="regModal" class="modal" role="dialog" aria-modal="true">
    <div class="dialog">
      <header>
        <h3>참가신청</h3>
        <button class="btn ghost" id="closeReg" aria-label="닫기">닫기</button>
      </header>
      <div class="body">
        <form id="regForm">
          <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
            <div>
              <label>이름</label>
              <input type="text" name="name" required />
            </div>
            <div>
              <label>연락처</label>
              <input type="tel" name="phone" placeholder="010-0000-0000" required />
            </div>
          </div>
          <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px">
            <div>
              <label>이메일(선택)</label>
              <input type="email" name="email" />
            </div>
            <div>
              <label>인원수</label>
              <input type="number" name="count" min="1" value="1" required />
            </div>
          </div>
          <div style="margin-top:10px">
            <label>한마디(선택)</label>
            <textarea name="msg" placeholder="동아리에게 전하고 싶은 말"></textarea>
          </div>
          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;align-items:center">
            <button class="btn primary" type="submit" id="regSubmit">신청 완료</button>
            <button class="btn ghost" type="button" id="testPing" title="시트 연결 테스트">연결 테스트</button>
            <span class="note">* 신청 정보는 구글 시트에만 저장됩니다.</span>
          </div>
        </form>
        <div style="padding:12px;margin-top:14px;background:rgba(20,21,42,.7);border-radius:12px;border:1px solid rgba(255,255,255,.08)">
          <b>안내</b>
          <p class="note" style="margin:6px 0 0">신청 정보는 구글 시트에만 저장됩니다. (브라우저 로컬 저장 안 함)</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 후원 계좌 모달 + QR -->
  <div id="sponsorModal" class="modal" role="dialog" aria-modal="true">
    <div class="dialog">
      <header>
        <h3>후원 계좌 안내</h3>
        <button class="btn ghost" id="closeSponsor" aria-label="닫기">닫기</button>
      </header>
      <div class="body">
        <div style="display:grid;gap:8px">
          <div class="account" id="accountNumber">123456-78-901234</div>
          <div class="bank" id="bankInfo">국민은행 · 예금주: 풍물놀이패</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn secondary" id="copyAccount">계좌번호 복사</button>
            <button class="btn secondary" id="copyAll">전체 정보 복사</button>
          </div>
          <div class="qr-wrap">
            <div class="qr-box">
              <img id="qrImage" alt="QR 코드" width="220" height="220" />
            </div>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <button class="btn primary" id="downloadQR">QR 이미지 다운로드</button>
              <span class="note">* 은행 앱에서 QR 스캔 → ‘메모/이체’에 활용하세요.</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ===================== 사용자 설정 ===================== */
    // 구글 시트 Apps Script 웹앱 URL (반드시 "모든 사용자"로 배포한 URL)
    // 예) https://script.google.com/macros/s/AKfycbx.../exec
    const SHEET_ENDPOINT = 'https://script.google.com/macros/s/AKfycbzAkTilyUWeapEOT6yO3Swe1qmZDyI8yRwpcW-mcZdmN9ODJChbPxSlSxvUIiNyuy4V/exec';

    /* ===================== 공통 유틸 ===================== */
    const $ = (s, root=document) => root.querySelector(s);
    const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));

    // ✅ 과거 로컬 저장 잔여물 강제 청소 (혹시 남았을 경우 대비)
    try { localStorage.removeItem('pungmul40_registrations_v1'); } catch (e) {}

    // 배경 이미지를 ?bg= 또는 #bg=로 교체 지원
    (function setFixedBodyBackground(){
      try{
        const search = new URLSearchParams(location.search);
        const hashParams = new URLSearchParams(location.hash.startsWith('#') ? location.hash.substring(1) : '');
        const src = search.get('bg') || hashParams.get('bg');
        if(src){
          const test = new Image();
          test.onload = function(){ document.body.style.backgroundImage = "url('"+ src.replace(/'/g,"\\'") +"')"; };
          test.src = src;
        }
      }catch(e){}
    })();

    /* ===================== D-DAY ===================== */
    const eventDate = new Date('2026-05-30T00:00:00+09:00').getTime(); // KST 기준 2026-05-30
    function tick(){
      const now = Date.now();
      let diff = Math.max(0, eventDate - now);
      const d = Math.floor(diff / 86400000); diff -= d*86400000;
      const h = Math.floor(diff / 3600000); diff -= h*3600000;
      const m = Math.floor(diff / 60000); diff -= m*60000;
      const s = Math.floor(diff / 1000);
      $('#days').textContent = d; $('#hours').textContent = h; $('#mins').textContent = m; $('#secs').textContent = s;
      $('#dday').textContent = d === 0 ? 0 : d;
    }
    tick(); setInterval(tick,1000);

    /* ===================== 모달 ===================== */
    const regModal = $('#regModal');
    const sponsorModal = $('#sponsorModal');
    $('#openReg').addEventListener('click', ()=> regModal.setAttribute('open',''));
    $('#closeReg').addEventListener('click', ()=> regModal.removeAttribute('open'));
    regModal.addEventListener('click', (e)=>{ if(e.target.id==='regModal') regModal.removeAttribute('open'); });

    $('#openSponsor').addEventListener('click', ()=> sponsorModal.setAttribute('open',''));
    $('#closeSponsor').addEventListener('click', ()=> sponsorModal.removeAttribute('open'));
    sponsorModal.addEventListener('click', (e)=>{ if(e.target.id==='sponsorModal') sponsorModal.removeAttribute('open'); });

    /* ===================== 후원 QR/복사 ===================== */
    const acctEl = $('#accountNumber');
    const bankEl = $('#bankInfo');
    const qrImg = $('#qrImage');

    function refreshQR(){
      const payload = acctEl.textContent.trim() + ' | ' + bankEl.textContent.trim();
      const url = 'https://chart.googleapis.com/chart?chs=220x220&cht=qr&chl=' + encodeURIComponent(payload);
      qrImg.src = url;
      qrImg.alt = 'QR: ' + payload;
    }
    refreshQR();

    $('#copyAccount').addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(acctEl.textContent.trim()); alert('계좌번호가 복사되었습니다.'); }catch(_){ alert('복사에 실패했습니다.'); }
    });
    $('#copyAll').addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(acctEl.textContent.trim() + ' / ' + bankEl.textContent.trim()); alert('전체 정보가 복사되었습니다.'); }catch(_){ alert('복사에 실패했습니다.'); }
    });
    $('#downloadQR').addEventListener('click', ()=>{
      const a = document.createElement('a'); a.href = qrImg.src; a.download = 'pungmul_sponsor_qr.png'; a.click();
    });

    /* ===================== 참가 신청 (구글 시트만 저장: 프리플라이트 회피) ===================== */
    $('#regForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const submitBtn = $('#regSubmit');
      const fd = new FormData(e.target);

      // URL-encoded로 전송 (브라우저가 헤더 자동 설정, 프리플라이트 없음)
      const body = new URLSearchParams({
        name:  String(fd.get('name') || '').trim(),
        phone: String(fd.get('phone')|| '').trim(),
        email: String(fd.get('email')|| '').trim(),
        count: String(Math.max(1, Number(fd.get('count'))||1)),
        msg:   String(fd.get('msg')  || '').trim(),
        ts:    new Date().toISOString()
      });

      if(!SHEET_ENDPOINT){ alert('관리자 설정 필요: SHEET_ENDPOINT 비어있음'); return; }

      try {
        submitBtn.disabled = true;
        submitBtn.textContent = '전송 중...';

        const res = await fetch(SHEET_ENDPOINT, { method: 'POST', body });
        try { console.log('[GAS] response:', await res.clone().text()); } catch(_) {}

        alert('신청이 접수되었습니다. 감사합니다!');
        e.target.reset();
        regModal.removeAttribute('open');
      } catch (err) {
        console.error(err);
        alert('구글 시트 저장 실패(네트워크/권한/CORS 설정 확인)');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = '신청 완료';
      }
    });

    // 옵션: 연결 핑 테스트 버튼 (GET)
    $('#testPing').addEventListener('click', async ()=>{
      if(!SHEET_ENDPOINT){ return alert('SHEET_ENDPOINT가 비어있습니다.'); }
      const pingUrl = SHEET_ENDPOINT.replace(/\/exec$/, '/exec');
      try{
        const r = await fetch(pingUrl + '?ping=1');
        const t = await r.text();
        alert('연결 OK\n' + t.slice(0,120));
      }catch(e){
        alert('연결 실패: ' + e);
      }
    });

    /* ===================== 요금 선택 ===================== */
    const feeRadios = $$('input[name="fee"]');
    const feeSelected = $('#feeSelected');
    const customFee = $('#customFee');
    function syncFee(){
      const v = (feeRadios.find(r=>r.checked)||{}).value || '0';
      if(v==='custom'){
        customFee.style.display='block';
        feeSelected.textContent = Number(customFee.value||0).toLocaleString() + '원';
      } else {
        customFee.style.display='none';
        feeSelected.textContent = Number(v).toLocaleString() + '원';
      }
    }
    feeRadios.forEach(r=>r.addEventListener('change', syncFee));
    if(customFee){ customFee.addEventListener('input', syncFee); }
    if(feeSelected){ syncFee(); }

    /* ===================== 메일 전송(메일앱) ===================== */
    const mailForm = $('#mailForm');
    if(mailForm){
      mailForm.addEventListener('submit', (e)=>{
        e.preventDefault();
        const fd = new FormData(e.target);
        const to = $('#contactEmail').textContent.trim();
        const subject = encodeURIComponent('[문의] ' + (fd.get('name')||'') + '님 (' + (fd.get('type')||'') + ')');
        const body = encodeURIComponent(
          '이름: ' + (fd.get('name')||'') + '\n' +
          '이메일: ' + (fd.get('email')||'') + '\n' +
          '연락처: ' + (fd.get('phone')||'') + '\n' +
          '유형: ' + (fd.get('type')||'') + '\n\n' +
          '내용:\n' + (fd.get('message')||'')
        );
        location.href = 'mailto:' + to + '?subject=' + subject + '&body=' + body;
      });
    }
  </script>
</body>
</html>
